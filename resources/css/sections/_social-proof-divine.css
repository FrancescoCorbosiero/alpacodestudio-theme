@layer sections {
  /* ============================================
     DIVINE SOCIAL PROOF - 3D Carousel
     Auto-rotating testimonials with glassmorphism
     ============================================ */

  .social-proof-divine {
    padding-block: calc(var(--space-3xl) * 2);
    background: var(--color-surface-base);
    position: relative;
    overflow: hidden;
  }

  /* Header */
  .social-proof-divine__header {
    text-align: center;
    margin-block-end: var(--space-3xl);
    padding-inline: var(--gutter);
  }

  .social-proof-divine__eyebrow {
    display: inline-block;
    font-size: var(--font-size-sm);
    text-transform: uppercase;
    letter-spacing: var(--letter-spacing-wide);
    color: var(--color-brand-primary);
    padding: var(--space-xs) var(--space-lg);
    border: 2px solid var(--color-brand-primary);
    border-radius: var(--radius-full);
    background: color-mix(in oklch, var(--color-brand-primary), transparent 90%);
    margin-block-end: var(--space-lg);
  }

  .social-proof-divine__title {
    color: var(--color-text-primary);
  }

  /* ============================================
     3D CAROUSEL
     ============================================ */

  .testimonial-carousel {
    position: relative;
    width: 100%;
    padding-block: var(--space-3xl);
  }

  .testimonial-carousel__stage {
    position: relative;
    height: 500px;
    perspective: 2000px;
    transform-style: preserve-3d;
  }

  /* Testimonial Card */
  .testimonial-card-divine {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: min(600px, 90vw);
    max-width: 600px;
    padding: var(--space-3xl);
    border-radius: var(--radius-3xl);
    transition:
      transform var(--duration-slow) var(--easing-smooth),
      opacity var(--duration-slow) var(--easing-smooth),
      z-index 0s var(--duration-slow);
    will-change: transform, opacity;
    pointer-events: none;
  }

  .testimonial-card-divine.is-active {
    pointer-events: auto;
  }

  /* Glassmorphic Background */
  .testimonial-card-divine__glass {
    position: absolute;
    inset: 0;
    background: color-mix(in oklch, var(--color-surface-base), transparent 10%);
    backdrop-filter: blur(40px) saturate(180%);
    border-radius: var(--radius-3xl);
    border: 1px solid color-mix(in oklch, var(--color-neutral-200), transparent 50%);
    box-shadow:
      0 20px 60px color-mix(in oklch, black, transparent 80%),
      0 0 0 1px color-mix(in oklch, white, transparent 90%) inset;
    z-index: -1;
  }

  [data-theme="dark"] .testimonial-card-divine__glass {
    background: color-mix(in oklch, var(--color-neutral-900), transparent 30%);
    border-color: color-mix(in oklch, var(--color-neutral-700), transparent 50%);
    box-shadow:
      0 20px 60px color-mix(in oklch, black, transparent 50%),
      0 0 0 1px color-mix(in oklch, white, transparent 95%) inset;
  }

  /* Content */
  .testimonial-card-divine__content {
    position: relative;
    z-index: 1;
  }

  /* Stars */
  .testimonial-card-divine__stars {
    display: flex;
    gap: var(--space-xs);
    margin-block-end: var(--space-xl);
  }

  .star {
    color: var(--color-neutral-300);
    transition: color var(--duration-base) var(--easing-out);
  }

  .star.is-filled {
    color: #fbbf24; /* Gold */
    filter: drop-shadow(0 0 8px rgba(251, 191, 36, 0.5));
  }

  /* Quote */
  .testimonial-card-divine__quote {
    margin: 0;
    margin-block-end: var(--space-2xl);
  }

  .testimonial-card-divine__quote p {
    font-size: var(--font-size-2xl);
    line-height: var(--line-height-relaxed);
    color: var(--color-text-primary);
    font-weight: var(--font-weight-medium);
    margin: 0;
  }

  .testimonial-card-divine__quote::before {
    content: '"';
    font-size: var(--font-size-6xl);
    line-height: 0;
    color: var(--color-brand-primary);
    opacity: 0.3;
    margin-right: var(--space-xs);
  }

  /* Author */
  .testimonial-card-divine__author {
    display: flex;
    align-items: center;
    gap: var(--space-lg);
  }

  .testimonial-card-divine__avatar-wrapper {
    position: relative;
    flex-shrink: 0;
  }

  .testimonial-card-divine__avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid var(--color-brand-primary);
    position: relative;
    z-index: 1;
  }

  .testimonial-card-divine__avatar-glow {
    position: absolute;
    inset: -10px;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      color-mix(in oklch, var(--color-brand-primary), transparent 60%) 0%,
      transparent 70%
    );
    filter: blur(15px);
    z-index: 0;
    opacity: 0.7;
  }

  .testimonial-card-divine__author-info {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
  }

  .testimonial-card-divine__name {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text-primary);
    font-style: normal;
  }

  .testimonial-card-divine__role {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    margin: 0;
  }

  /* ============================================
     NAVIGATION
     ============================================ */

  .testimonial-carousel__nav {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: var(--space-2xl);
    margin-block-start: var(--space-3xl);
  }

  .carousel-nav-btn {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: color-mix(in oklch, var(--color-surface-base), transparent 10%);
    backdrop-filter: blur(20px);
    border: 1px solid color-mix(in oklch, var(--color-neutral-200), transparent 50%);
    color: var(--color-text-primary);
    display: grid;
    place-items: center;
    cursor: pointer;
    transition:
      transform var(--duration-base) var(--easing-out),
      background var(--duration-base) var(--easing-out),
      border-color var(--duration-base) var(--easing-out);
    padding: 0;
  }

  .carousel-nav-btn:hover {
    background: var(--color-brand-primary);
    border-color: var(--color-brand-primary);
    color: var(--color-text-inverse);
    transform: scale(1.1);
  }

  .carousel-nav-btn:active {
    transform: scale(0.95);
  }

  [data-theme="dark"] .carousel-nav-btn {
    background: color-mix(in oklch, var(--color-neutral-800), transparent 30%);
    border-color: color-mix(in oklch, var(--color-neutral-700), transparent 50%);
  }

  /* Dots */
  .carousel-dots {
    display: flex;
    gap: var(--space-md);
  }

  .carousel-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: color-mix(in oklch, var(--color-text-secondary), transparent 70%);
    border: 2px solid transparent;
    cursor: pointer;
    transition:
      background var(--duration-base) var(--easing-out),
      transform var(--duration-base) var(--easing-out);
    padding: 0;
  }

  .carousel-dot.is-active {
    background: var(--color-brand-primary);
    transform: scale(1.3);
    box-shadow: 0 0 0 4px color-mix(in oklch, var(--color-brand-primary), transparent 80%);
  }

  .carousel-dot:hover:not(.is-active) {
    background: color-mix(in oklch, var(--color-text-secondary), transparent 50%);
    transform: scale(1.1);
  }

  /* ============================================
     CLIENT LOGOS
     ============================================ */

  .client-logos {
    margin-block-start: calc(var(--space-3xl) * 2);
    padding-inline: var(--gutter);
  }

  .client-logos__title {
    text-align: center;
    font-size: var(--font-size-sm);
    text-transform: uppercase;
    letter-spacing: var(--letter-spacing-wide);
    color: var(--color-text-tertiary);
    margin-block-end: var(--space-2xl);
  }

  .client-logos__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--space-2xl);
    max-width: var(--container-lg);
    margin-inline: auto;
    align-items: center;
  }

  .client-logo {
    display: grid;
    place-items: center;
    padding: var(--space-lg);
    opacity: 0.5;
    transition:
      opacity var(--duration-base) var(--easing-out),
      transform var(--duration-base) var(--easing-out);
  }

  .client-logo:hover {
    opacity: 1;
    transform: scale(1.1);
  }

  .client-logo__svg {
    width: 100%;
    height: auto;
    max-width: 120px;
    color: var(--color-text-secondary);
  }

  /* ============================================
     RESPONSIVE
     ============================================ */

  @media (max-width: 968px) {
    .social-proof-divine {
      padding-block: var(--space-3xl);
    }

    .testimonial-carousel__stage {
      height: 600px;
    }

    .testimonial-card-divine {
      width: 90vw;
      padding: var(--space-2xl);
    }

    .testimonial-card-divine__quote p {
      font-size: var(--font-size-xl);
    }

    /* Hide side cards on mobile */
    .testimonial-card-divine:not(.is-active) {
      opacity: 0 !important;
      pointer-events: none;
    }

    .client-logos__grid {
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: var(--space-xl);
    }

    .carousel-nav-btn {
      width: 40px;
      height: 40px;
    }
  }

  @media (max-width: 640px) {
    .testimonial-carousel__stage {
      height: 650px;
    }

    .testimonial-card-divine {
      padding: var(--space-xl);
    }

    .testimonial-card-divine__quote p {
      font-size: var(--font-size-lg);
    }

    .testimonial-card-divine__name {
      font-size: var(--font-size-lg);
    }

    .testimonial-carousel__nav {
      gap: var(--space-lg);
    }
  }
}
